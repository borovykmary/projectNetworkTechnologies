{"ast":null,"code":"import axios from \"axios\";\nexport class LibraryClient {\n  constructor() {\n    this.baseUrl = \"http://localhost:8080/api\";\n    this.client = void 0;\n    this.client = axios.create({\n      baseURL: this.baseUrl\n    });\n  }\n  async login(data) {\n    try {\n      const response = await this.client.post(\"/auth/login\", data);\n      if (response && response.data && response.data.token) {\n        this.client.defaults.headers.common[\"Authorization\"] = `Bearer ${response.data.token}`;\n        return {\n          success: true,\n          data: undefined,\n          status: response.status\n        };\n      } else {\n        throw new Error(\"Invalid response\");\n      }\n    } catch (error) {\n      var _axiosError$response, _axiosError$response2, _axiosError$response3;\n      const axiosError = error;\n      console.error((_axiosError$response = axiosError.response) === null || _axiosError$response === void 0 ? void 0 : _axiosError$response.data);\n      return {\n        success: false,\n        data: (_axiosError$response2 = axiosError.response) === null || _axiosError$response2 === void 0 ? void 0 : _axiosError$response2.data,\n        status: ((_axiosError$response3 = axiosError.response) === null || _axiosError$response3 === void 0 ? void 0 : _axiosError$response3.status) || 500\n      };\n    }\n  }\n  async getBooks() {\n    try {\n      const response = await this.client.get(\"/books\");\n      return {\n        success: true,\n        data: response.data,\n        status: response.status\n      };\n    } catch (error) {\n      var _axiosError$response4, _axiosError$response5;\n      const axiosError = error;\n      return {\n        success: false,\n        data: (_axiosError$response4 = axiosError.response) === null || _axiosError$response4 === void 0 ? void 0 : _axiosError$response4.data,\n        status: ((_axiosError$response5 = axiosError.response) === null || _axiosError$response5 === void 0 ? void 0 : _axiosError$response5.status) || 500\n      };\n    }\n  }\n  async getBookDetails(bookId) {\n    try {\n      const response = await this.client.get(`/book-details/${bookId}`);\n      return {\n        success: true,\n        data: response.data,\n        status: response.status\n      };\n    } catch (error) {\n      var _axiosError$response6, _axiosError$response7, _axiosError$response8;\n      const axiosError = error;\n      if (((_axiosError$response6 = axiosError.response) === null || _axiosError$response6 === void 0 ? void 0 : _axiosError$response6.status) === 404) {\n        // Return default values if details are not found\n        const defaultDetails = {\n          id: -1,\n          bookId: bookId,\n          genre: \"No data\",\n          summary: \"No data\",\n          coverImageUrl: \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNT0xwyLstvC7wH8jYIKur3GTcSq-g6fj2EbL4wk-qaONHYjBswa3rpFsZJeEjuXcG-lw&usqp=CAU\"\n        };\n        return {\n          success: true,\n          data: defaultDetails,\n          status: 200\n        };\n      }\n      return {\n        success: false,\n        data: (_axiosError$response7 = axiosError.response) === null || _axiosError$response7 === void 0 ? void 0 : _axiosError$response7.data,\n        status: ((_axiosError$response8 = axiosError.response) === null || _axiosError$response8 === void 0 ? void 0 : _axiosError$response8.status) || 500\n      };\n    }\n  }\n}","map":{"version":3,"names":["axios","LibraryClient","constructor","baseUrl","client","create","baseURL","login","data","response","post","token","defaults","headers","common","success","undefined","status","Error","error","_axiosError$response","_axiosError$response2","_axiosError$response3","axiosError","console","getBooks","get","_axiosError$response4","_axiosError$response5","getBookDetails","bookId","_axiosError$response6","_axiosError$response7","_axiosError$response8","defaultDetails","id","genre","summary","coverImageUrl"],"sources":["/Users/marynaborovyk/Desktop/semestr-4/Network_Technologies/Project/projectNetworkTechnologies/frontend_nt/library-webapp/src/api/library-clients.ts"],"sourcesContent":["import axios, { AxiosError, AxiosInstance, AxiosResponse } from \"axios\";\nimport { LoginResponseDto } from \"./login-response.dto\";\nimport { LoginRequestDto } from \"./login-request.dto\";\nimport { Book } from \"./Book\";\nimport { BookDetails } from \"./BookDetails\";\nimport jwt_decode from \"jwt-decode\";\n\ntype ClientResponse = {\n  success: boolean;\n  data: any;\n  status: number;\n};\n\nexport class LibraryClient {\n  private baseUrl = \"http://localhost:8080/api\";\n  private client: AxiosInstance;\n\n  constructor() {\n    this.client = axios.create({\n      baseURL: this.baseUrl,\n    });\n  }\n\n  public async login(data: LoginRequestDto): Promise<ClientResponse> {\n    try {\n      const response: AxiosResponse<LoginResponseDto> = await this.client.post(\n        \"/auth/login\",\n        data,\n      );\n      if (response && response.data && response.data.token) {\n        this.client.defaults.headers.common[\"Authorization\"] =\n            `Bearer ${response.data.token}`;\n\n        return {\n          success: true,\n          data: undefined,\n          status: response.status,\n        };\n\n      } else {\n        throw new Error(\"Invalid response\");\n      }\n    } catch (error) {\n      const axiosError = error as AxiosError<Error>;\n      console.error(axiosError.response?.data)\n\n      return {\n        success: false,\n        data: axiosError.response?.data,\n        status: axiosError.response?.status || 500,\n      };\n    }\n  }\n  public async getBooks(): Promise<ClientResponse> {\n    try {\n      const response: AxiosResponse<Book[]> = await this.client.get(\"/books\");\n\n      return {\n        success: true,\n        data: response.data,\n        status: response.status,\n      };\n    } catch (error) {\n      const axiosError = error as AxiosError<Error>;\n\n      return {\n        success: false,\n        data: axiosError.response?.data,\n        status: axiosError.response?.status || 500,\n      };\n    }\n  }\n  public async getBookDetails(bookId: number): Promise<ClientResponse> {\n    try {\n      const response: AxiosResponse<BookDetails> = await this.client.get(\n        `/book-details/${bookId}`,\n      );\n      return {\n        success: true,\n        data: response.data,\n        status: response.status,\n      };\n    } catch (error) {\n      const axiosError = error as AxiosError<Error>;\n      if (axiosError.response?.status === 404) {\n        // Return default values if details are not found\n        const defaultDetails: BookDetails = {\n          id: -1,\n          bookId: bookId,\n          genre: \"No data\",\n          summary: \"No data\",\n          coverImageUrl:\n            \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNT0xwyLstvC7wH8jYIKur3GTcSq-g6fj2EbL4wk-qaONHYjBswa3rpFsZJeEjuXcG-lw&usqp=CAU\",\n        };\n        return {\n          success: true,\n          data: defaultDetails,\n          status: 200,\n        };\n      }\n      return {\n        success: false,\n        data: axiosError.response?.data,\n        status: axiosError.response?.status || 500,\n      };\n    }\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}